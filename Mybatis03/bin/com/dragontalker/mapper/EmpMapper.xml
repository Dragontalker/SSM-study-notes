<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.dragontalker.mapper.EmpMapper">

	<!-- 
		<if test=""></if>: 通过test表达式, 拼接SQL
		<where>: 添加where关键字, 同时去掉多余的and
		<trim>: 截取并拼接
		prefix: 在操作的SQL语句前加入某些内容
		suffix: 在操作的SQL语句后加入某些内容
		prefixOverrides: 把操作的SQL语句前的某些内容去掉
		suffixOverrides: 把操作的SQL语句后的某些内容去掉
	 -->

	<!-- List<Emp> getEmpListByMoreTJ(Emp emp); -->
	<!-- 多条件查询: 若页面中没有设置此条件, SQL语句中一定不能有该条件 -->
	<select id="getEmpListByMoreTJ1" resultType="Emp">
		select eid, ename, age, sex, did from emp 
		<where>
			<if test="eid != null">
				eid = #{eid}
			</if>
			<if test="ename != null and ename !=''">
				ename = #{ename}
			</if>
			<if test="age != null">
				age = #{age}
			</if>
			<if test="sex == '1' or sex == '0'">
				sex = #{sex}
			</if>
		</where>
	</select>
	
	<select id="getEmpListByMoreTJ" resultType="Emp">
		select eid, ename, age, sex, did from emp 
		<trim prefix="where" suffixOverrides="and|or">
			<if test="eid != null">
				eid = #{eid} and
			</if>
			<if test="ename != null and ename !=''">
				ename = #{ename} and
			</if>
			<if test="age != null">
				age = #{age} or
			</if>
			<if test="sex != null">
				sex = #{sex}
			</if>
		</trim>
	</select>
	
	<!-- List<Emp> getEmpListByChoose(Emp emp); -->
	<select id="getEmpListByChoose" resultType="Emp">
		select eid, ename, age, sex from emp
		where
		<choose>
			<when test="eid != null">
				eid = #{eid}
			</when>
			<when test="ename != null and ename != ''">
				ename = #{ename}
			</when>
		</choose>
	</select>
	
</mapper>